<!DOCTYPE html>
<html layout:decorate="~{layout}">
<head>
<meta charset="UTF-8" />
<section layout:fragment="corpo">

	<div class="container" id="listagem">

		<!-- Stack the columns on mobile by making one full-width and the other half-width -->
		<div class="row">
			<div class="col-12 col-md-6">
				<div class="row">
					<div class="col-12 col-md-6">
						<div class="row">
							<img th:src="${veiculo.arquivos[0].nome}" />
						</div>
					</div>

				</div>
			</div>
			<div class="col-12 col-md-6">
				<div class="row">
					<div class="col-12 col-md-6">

						Nome: <a th:text="${veiculo.nome}"></a><br /> Marca: <a
							th:text="${veiculo.tipoMarca.marca.nome}"></a><br>
						Categoria: <a th:text="${veiculo.categoria.nome}"></a><br>
						Pre√ßo: <a id="preco" th:text="${veiculo.categoria.valor}"></a><br>
						Diarias: <a id="diarias"></a><br /> Seguro: <a id="valorSeguro"></a><br />
						Valor Final: <a id="valorLocacao"></a><br />

					</div>

					<div class="col-12 col-md-6">
						<form method="POST" th:action=@{/veiculos/salvar}
							th:object="${veiculo}" enctype="multipart/form-data">
							<div class="form-group">
								<label>Seguro(ex:Normal/Vip)</label> <select id="seguro"
									class="form-control">
									<option value="">Selecione</option>
									<option th:each="c : ${seguros}" th:value="${c.id}"
										th:text="${c.nome} + ' R$' + ${c.preco}"></option>

								</select>
							</div>
						</form>
					</div>

				</div>
			</div>
		</div>
	</div>
</section>
</body>
</html>
<!-- Placed at the end of the document so the pages load faster -->
<script src="https://code.jquery.com/jquery-3.4.1.min.js"
	integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
	crossorigin="anonymous"></script>
<script type="text/javascript">
	$(document).ready(
			function() {
				const DAY = 24 * 60 * 60 * 1000;
				var data1 = new Date(2020, 11, 26);
				var data2 = new Date(2020, 12, 1);

				var calcMlsdata1 = data1.getTime();
				var calcMlsdata2 = data2.getTime();
				var diferenca = calcMlsdata2 - calcMlsdata1;
				var qtdDias = diferenca / DAY;
				console.log(qtdDias);
				var array;
				var valorSeguro = 0;
				var valorFinal = 0;
				$("#diarias").text(qtdDias);
				var precoVeiculo = $('#preco').text();
				console.log(precoVeiculo);
				$('#seguro').change(
						function() {

							var valor = $('#seguro option:selected').val();
							var nome = $('#seguro option:selected').text();
							if (valor != "") {

								console.log(valor);
								console.log(nome);

								array = nome.split("R$");
								console.log(array[0]);
								valorSeguro = array[1];
								console.log(valorSeguro);
								$("#valorSeguro").text(valorSeguro);

								valorFinal = (precoVeiculo * qtdDias)
										+ (valorSeguro * qtdDias);

								$("#valorLocacao").text(valorFinal);
							} else {
								valorFinal = (precoVeiculo * qtdDias);
								valorSeguro = 0;
								$("#valorSeguro").text(valorSeguro);
								console.log(valorFinal);
								$("#valorLocacao").text(valorFinal);
							}
						});

			});
</script>
</script>



